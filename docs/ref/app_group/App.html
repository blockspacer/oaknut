---
title: App
layout: default
---

<h1>App</h1>

<code>
class App
    : public Object</code>

<p>
The single instance of this class is accessed through the global 'app' variable.     </p>
<p>
Base class for the background thread of a Worker.A 'worker' is a background thread that processes serialized input and produces serialized output.It is based on the Javascript API of the same name. Every worker has two components, the client (in-app) side and the background thread side. The `Worker` class is the client side that application code uses to instantiate and send and receive work from the background thread.Worker exists to provide a common abstraction of background processing that will work on web as well as it does natively. If the W3C and/or browser makers ever restore SharedArrayBuffer to the WebWorker context then we can revisit this cos pthreads will be usable everywhere then.Application code should not use this class directly, it is solely for implementing Workers.     </p>
<h2>Time</h2>

<table>
<tr><td>TIMESTAMP <a href="todo">currentMillis</a>()</td><td>Gets the current system time, in milliseconds.</td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">friendlyTimeString</a>(TIMESTAMP timestamp)</td><td></td></tr>
<table>

<h2>Logging</h2>

<table>
<tr><td>void <a href="todo">log</a>(char const * fmt, ... )</td><td>Log an informational message.</td></tr>
<tr><td>void <a href="todo">warn</a>(char const * fmt, ... )</td><td>Log a warning message prefixed with "Warning: ".</td></tr>
<table>

<h2>File paths</h2>

<table>
<tr><td><a href="classstring.html">string</a> <a href="todo">getPathForGeneralFiles</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">getPathForUserDocuments</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">getPathForCacheFiles</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">getPathForTemporaryFiles</a>()</td><td></td></tr>
<table>

<h2>Styles</h2>

<table>
<tr><td>void <a href="todo">loadStyleAsset</a>(const <a href="classstring.html">string</a> & assetPath)</td><td>Load a style asset from the assets directory.</td></tr>
<tr><td>const <a href="class_style_value.html">StyleValue</a> * <a href="todo">getStyleValue</a>(const <a href="classstring.html">string</a> & keypath)</td><td>Get a named style value.</td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">getStyleString</a>(const <a href="classstring.html">string</a> & key, const char * defaultString)</td><td>Get a named style value and coerce to a string.</td></tr>
<tr><td>float <a href="todo">getStyleFloat</a>(const <a href="classstring.html">string</a> & key)</td><td>Get a named style value and coerce to a float.</td></tr>
<tr><td><a href="class_c_o_l_o_r.html">COLOR</a> <a href="todo">getStyleColor</a>(const <a href="classstring.html">string</a> & key)</td><td>Get a named style value and coerce to a COLOR.</td></tr>
<table>

<h2>Layout</h2>

<table>
<tr><td>class <a href="class_view.html">View</a> * <a href="todo">layoutInflate</a>(const <a href="classstring.html">string</a> & assetPath)</td><td>Loads a view from an asset file.</td></tr>
<tr><td>void <a href="todo">layoutInflateExistingView</a>(<a href="class_view.html">View</a> * view, const <a href="classstring.html">string</a> & assetPath)</td><td></td></tr>
<tr><td>float <a href="todo">dp</a>(float dp)</td><td>Converts a 'dp' measurement into physical pixels.</td></tr>
<tr><td>float <a href="todo">idp</a>(float pix)</td><td>Converts a 'dp' measurement into physical pixels and floor()s the result to an integer.</td></tr>
<table>

<h2>Locale</h2>

<table>
<tr><td><a href="classstring.html">string</a> <a href="todo">currentCountryCode</a>()</td><td>Returns ISO-3166 two-letter country code the device is configured for, which is not necessarily the country the device is currently in.</td></tr>
<table>

<h2>Settings</h2>

<table>
<tr><td>int <a href="todo">getIntSetting</a>(const char * key, const int defaultValue)</td><td>Gets a named integer setting.</td></tr>
<tr><td>void <a href="todo">setIntSetting</a>(const char * key, int value)</td><td>Sets a named integer setting.</td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">getStringSetting</a>(const char * key, const char * defaultValue)</td><td>Gets a named string setting.</td></tr>
<tr><td>void <a href="todo">setStringSetting</a>(const char * key, const char * value)</td><td>Sets a named string setting.</td></tr>
<table>

<h2></h2>

<table>
<table>

<h2></h2>

<table>
<table>

<h2></h2>

<table>
<tr><td> <a href="todo">App</a>()</td><td></td></tr>
<tr><td>void <a href="todo">main</a>()</td><td>Application entry point.</td></tr>
<tr><td>class <a href="class_byte_buffer.html">ByteBuffer</a> * <a href="todo">loadAsset</a>(const char * assetPath)</td><td>Load a file from the assets directory, synchronously.</td></tr>
<table>

<h2></h2>

<table>
<tr><td><a href="class_task.html">Task</a> * <a href="todo">postToMainThread</a>(std::function< void(void)> func, int delay)</td><td></td></tr>
<table>

<h1>Methods</h1>

<h3>currentMillis</h3>
<code>TIMESTAMP <a href="todo">currentMillis</a>()</code><p></p>

<h3>friendlyTimeString</h3>
<code><a href="classstring.html">string</a> <a href="todo">friendlyTimeString</a>(TIMESTAMP timestamp)</code><p></p>

<h3>log</h3>
<code>void <a href="todo">log</a>(char const * fmt, ... )</code><p></p>

<h3>warn</h3>
<code>void <a href="todo">warn</a>(char const * fmt, ... )</code><p></p>

<h3>getPathForGeneralFiles</h3>
<code><a href="classstring.html">string</a> <a href="todo">getPathForGeneralFiles</a>()</code><p></p>

<h3>getPathForUserDocuments</h3>
<code><a href="classstring.html">string</a> <a href="todo">getPathForUserDocuments</a>()</code><p></p>

<h3>getPathForCacheFiles</h3>
<code><a href="classstring.html">string</a> <a href="todo">getPathForCacheFiles</a>()</code><p></p>

<h3>getPathForTemporaryFiles</h3>
<code><a href="classstring.html">string</a> <a href="todo">getPathForTemporaryFiles</a>()</code><p></p>

<h3>loadStyleAsset</h3>
<code>void <a href="todo">loadStyleAsset</a>(const <a href="classstring.html">string</a> & assetPath)</code><p>Generally used in App::main()</p>

<h3>getStyleValue</h3>
<code>const <a href="class_style_value.html">StyleValue</a> * <a href="todo">getStyleValue</a>(const <a href="classstring.html">string</a> & keypath)</code><p></p>

<h3>getStyleString</h3>
<code><a href="classstring.html">string</a> <a href="todo">getStyleString</a>(const <a href="classstring.html">string</a> & key, const char * defaultString)</code><p></p>

<h3>getStyleFloat</h3>
<code>float <a href="todo">getStyleFloat</a>(const <a href="classstring.html">string</a> & key)</code><p></p>

<h3>getStyleColor</h3>
<code><a href="class_c_o_l_o_r.html">COLOR</a> <a href="todo">getStyleColor</a>(const <a href="classstring.html">string</a> & key)</code><p></p>

<h3>layoutInflate</h3>
<code>class <a href="class_view.html">View</a> * <a href="todo">layoutInflate</a>(const <a href="classstring.html">string</a> & assetPath)</code><p>See the Layout Guide for details</p>

<h3>layoutInflateExistingView</h3>
<code>void <a href="todo">layoutInflateExistingView</a>(<a href="class_view.html">View</a> * view, const <a href="classstring.html">string</a> & assetPath)</code><p></p>

<h3>dp</h3>
<code>float <a href="todo">dp</a>(float dp)</code><p>Dp is a device-independent pixel and is based on 320dpi</p>

<h3>idp</h3>
<code>float <a href="todo">idp</a>(float pix)</code><p></p>

<h3>currentCountryCode</h3>
<code><a href="classstring.html">string</a> <a href="todo">currentCountryCode</a>()</code><p></p>

<h3>getIntSetting</h3>
<code>int <a href="todo">getIntSetting</a>(const char * key, const int defaultValue)</code><p></p>

<h3>setIntSetting</h3>
<code>void <a href="todo">setIntSetting</a>(const char * key, int value)</code><p></p>

<h3>getStringSetting</h3>
<code><a href="classstring.html">string</a> <a href="todo">getStringSetting</a>(const char * key, const char * defaultValue)</code><p></p>

<h3>setStringSetting</h3>
<code>void <a href="todo">setStringSetting</a>(const char * key, const char * value)</code><p></p>

<h3>App</h3>
<code> <a href="todo">App</a>()</code><p></p>

<h3>main</h3>
<code>void <a href="todo">main</a>()</code><p>Your implementation of this must instantiate a ViewController and set it as _window.rootViewController before returning</p>

<h3>loadAsset</h3>
<code>class <a href="class_byte_buffer.html">ByteBuffer</a> * <a href="todo">loadAsset</a>(const char * assetPath)</code><p>Since this does IO it's best to limit use to app startup and background threads</p>

<h3>postToMainThread</h3>
<code><a href="class_task.html">Task</a> * <a href="todo">postToMainThread</a>(std::function< void(void)> func, int delay)</code><p></p>

