---
title: string
layout: default
---

<h1>string</h1>

<code>
class string
</code>

<p>
An alternative to `stdstring`.     </p>
<p>
This is not quite a drop-in replacement. It is the same old byte buffer under the hood but this one treats the bytes as a UTF-8 encoded string and indexing is done by character offset rather than byte offset.Why? Because UTF-8 is by far the most popular way to encode text and I don't like the memory wasted by wide characters. In my experience the vast majority of strings are short and the runtime cost of finding character boundaries is acceptably small. The code is optimised for when byte count and char count are the same, i.e. the string contains no multibyte characters.NB: The allocated buffer is always one char larger than _cb and _cc indicate, to contain a terminating null character.Future: Support UTF-32 as well via pointer-tagging. Let the encoding be a settable property of the string which just defaults to UTF-8.     </p>
<h2></h2>

<table>
<table>

<h2></h2>

<table>
<table>

<h2></h2>

<table>
<tr><td> <a href="todo">string</a>()</td><td></td></tr>
<tr><td> <a href="todo">string</a>(const char * p)</td><td></td></tr>
<tr><td> <a href="todo">string</a>(const char * p, int32_t cb)</td><td></td></tr>
<tr><td> <a href="todo">string</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td> <a href="todo">string</a>(<a href="classstring.html">string</a> && other)</td><td></td></tr>
<tr><td> <a href="todo">~string</a>()</td><td></td></tr>
<tr><td>const char * <a href="todo">data</a>()</td><td></td></tr>
<tr><td>int32_t <a href="todo">length</a>()</td><td></td></tr>
<tr><td>int32_t <a href="todo">lengthInBytes</a>()</td><td></td></tr>
<tr><td>int <a href="todo">compare</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td>int <a href="todo">compare</a>(const char * s)</td><td></td></tr>
<tr><td>bool <a href="todo">operator==</a>(const <a href="classstring.html">string</a> & rhs)</td><td></td></tr>
<tr><td>bool <a href="todo">operator==</a>(const char * rhs)</td><td></td></tr>
<tr><td>bool <a href="todo">operator!=</a>(const <a href="classstring.html">string</a> & rhs)</td><td></td></tr>
<tr><td>bool <a href="todo">operator!=</a>(const char * rhs)</td><td></td></tr>
<tr><td>bool <a href="todo">operator<</a>(const <a href="classstring.html">string</a> & rhs)</td><td></td></tr>
<tr><td>bool <a href="todo">operator<</a>(const char * rhs)</td><td></td></tr>
<tr><td>char32_t <a href="todo">operator[]</a>(const int32_t charIndex)</td><td></td></tr>
<tr><td>char32_t <a href="todo">charAt</a>(const int32_t charIndex)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">substr</a>(int32_t charIndexStart, int32_t charIndexEnd)</td><td></td></tr>
<tr><td>int32_t <a href="todo">find</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td>int32_t <a href="todo">find</a>(const <a href="classstring.html">string</a> & str, int32_t start)</td><td></td></tr>
<tr><td>int32_t <a href="todo">find</a>(const char * s)</td><td></td></tr>
<tr><td>int32_t <a href="todo">find</a>(char32_t ch)</td><td></td></tr>
<tr><td>bool <a href="todo">contains</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td>bool <a href="todo">contains</a>(const char * s)</td><td></td></tr>
<tr><td>bool <a href="todo">contains</a>(char32_t ch)</td><td></td></tr>
<tr><td>void <a href="todo">assign</a>(const char * p, int32_t cb)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> & <a href="todo">operator=</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> & <a href="todo">operator=</a>(const char * s)</td><td></td></tr>
<tr><td>void <a href="todo">append</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td>void <a href="todo">append</a>(const char * s)</td><td></td></tr>
<tr><td>void <a href="todo">append</a>(const char * s, int32_t cb)</td><td></td></tr>
<tr><td>void <a href="todo">append</a>(char32_t ch)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> & <a href="todo">operator+=</a>(const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> & <a href="todo">operator+=</a>(const char * s)</td><td></td></tr>
<tr><td>void <a href="todo">insert</a>(int32_t charIndex, const <a href="classstring.html">string</a> & str)</td><td></td></tr>
<tr><td>void <a href="todo">insert</a>(int32_t charIndex, const char * str)</td><td></td></tr>
<tr><td>void <a href="todo">insert</a>(int32_t charIndex, const char * str, int32_t cb)</td><td></td></tr>
<tr><td>void <a href="todo">erase</a>(int32_t charIndex)</td><td></td></tr>
<tr><td>void <a href="todo">erase</a>(int32_t charIndexStart, int32_t charIndexEnd)</td><td></td></tr>
<tr><td>void <a href="todo">trim</a>()</td><td></td></tr>
<tr><td>bool <a href="todo">hasPrefix</a>(const <a href="classstring.html">string</a> & prefix)</td><td></td></tr>
<tr><td>bool <a href="todo">hadPrefix</a>(const <a href="classstring.html">string</a> & prefix)</td><td></td></tr>
<tr><td>bool <a href="todo">hasSuffix</a>(const <a href="classstring.html">string</a> & suffix)</td><td></td></tr>
<tr><td>bool <a href="todo">hadSuffix</a>(const <a href="classstring.html">string</a> & suffix)</td><td></td></tr>
<tr><td> <a href="todo">string</a>(const iterator & start, const iterator & end)</td><td></td></tr>
<tr><td>iterator <a href="todo">begin</a>()</td><td></td></tr>
<tr><td>iterator <a href="todo">end</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">extractUpTo</a>(const <a href="classstring.html">string</a> & sep, bool remove)</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">tokenise</a>(const <a href="classstring.html">string</a> & sep)</td><td></td></tr>
<tr><td>size_t <a href="todo">hash</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">lowercase</a>()</td><td></td></tr>
<tr><td>vector< <a href="classstring.html">string</a> > <a href="todo">split</a>(const <a href="classstring.html">string</a> & delimiter)</td><td></td></tr>
<tr><td><a href="classbytearray.html">bytearray</a> <a href="todo">unhex</a>()</td><td></td></tr>
<tr><td>int32_t <a href="todo">asInt</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">urlEncode</a>()</td><td></td></tr>
<tr><td><a href="classbytearray.html">bytearray</a> <a href="todo">toByteArray</a>(bool copy)</td><td></td></tr>
<table>

<h2></h2>

<table>
<tr><td><a href="classstring.html">string</a> <a href="todo">format</a>(const char * fmt, ... )</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">uuid</a>()</td><td></td></tr>
<tr><td><a href="classstring.html">string</a> <a href="todo">hex</a>(const void * p, int32_t cb)</td><td></td></tr>
<table>

<h2></h2>

<table>
<tr><td>int32_t <a href="todo">charIndexToByteIndex</a>(int32_t charIndex)</td><td></td></tr>
<tr><td>char32_t <a href="todo">readUtf8</a>(int32_t & byteOffset)</td><td></td></tr>
<tr><td>void <a href="todo">normaliseCharRange</a>(int32_t & charIndexStart, int32_t & charIndexEnd)</td><td></td></tr>
<tr><td>void <a href="todo">countChars</a>()</td><td></td></tr>
<table>

<h1>Methods</h1>

<h3>string</h3>
<code> <a href="todo">string</a>()</code><p></p>

<h3>string</h3>
<code> <a href="todo">string</a>(const char * p)</code><p></p>

<h3>string</h3>
<code> <a href="todo">string</a>(const char * p, int32_t cb)</code><p></p>

<h3>string</h3>
<code> <a href="todo">string</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>string</h3>
<code> <a href="todo">string</a>(<a href="classstring.html">string</a> && other)</code><p></p>

<h3>~string</h3>
<code> <a href="todo">~string</a>()</code><p></p>

<h3>data</h3>
<code>const char * <a href="todo">data</a>()</code><p></p>

<h3>length</h3>
<code>int32_t <a href="todo">length</a>()</code><p></p>

<h3>lengthInBytes</h3>
<code>int32_t <a href="todo">lengthInBytes</a>()</code><p></p>

<h3>compare</h3>
<code>int <a href="todo">compare</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>compare</h3>
<code>int <a href="todo">compare</a>(const char * s)</code><p></p>

<h3>operator==</h3>
<code>bool <a href="todo">operator==</a>(const <a href="classstring.html">string</a> & rhs)</code><p></p>

<h3>operator==</h3>
<code>bool <a href="todo">operator==</a>(const char * rhs)</code><p></p>

<h3>operator!=</h3>
<code>bool <a href="todo">operator!=</a>(const <a href="classstring.html">string</a> & rhs)</code><p></p>

<h3>operator!=</h3>
<code>bool <a href="todo">operator!=</a>(const char * rhs)</code><p></p>

<h3>operator<</h3>
<code>bool <a href="todo">operator<</a>(const <a href="classstring.html">string</a> & rhs)</code><p></p>

<h3>operator<</h3>
<code>bool <a href="todo">operator<</a>(const char * rhs)</code><p></p>

<h3>operator[]</h3>
<code>char32_t <a href="todo">operator[]</a>(const int32_t charIndex)</code><p></p>

<h3>charAt</h3>
<code>char32_t <a href="todo">charAt</a>(const int32_t charIndex)</code><p></p>

<h3>substr</h3>
<code><a href="classstring.html">string</a> <a href="todo">substr</a>(int32_t charIndexStart, int32_t charIndexEnd)</code><p></p>

<h3>find</h3>
<code>int32_t <a href="todo">find</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>find</h3>
<code>int32_t <a href="todo">find</a>(const <a href="classstring.html">string</a> & str, int32_t start)</code><p></p>

<h3>find</h3>
<code>int32_t <a href="todo">find</a>(const char * s)</code><p></p>

<h3>find</h3>
<code>int32_t <a href="todo">find</a>(char32_t ch)</code><p></p>

<h3>contains</h3>
<code>bool <a href="todo">contains</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>contains</h3>
<code>bool <a href="todo">contains</a>(const char * s)</code><p></p>

<h3>contains</h3>
<code>bool <a href="todo">contains</a>(char32_t ch)</code><p></p>

<h3>assign</h3>
<code>void <a href="todo">assign</a>(const char * p, int32_t cb)</code><p></p>

<h3>operator=</h3>
<code><a href="classstring.html">string</a> & <a href="todo">operator=</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>operator=</h3>
<code><a href="classstring.html">string</a> & <a href="todo">operator=</a>(const char * s)</code><p></p>

<h3>append</h3>
<code>void <a href="todo">append</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>append</h3>
<code>void <a href="todo">append</a>(const char * s)</code><p></p>

<h3>append</h3>
<code>void <a href="todo">append</a>(const char * s, int32_t cb)</code><p></p>

<h3>append</h3>
<code>void <a href="todo">append</a>(char32_t ch)</code><p></p>

<h3>operator+=</h3>
<code><a href="classstring.html">string</a> & <a href="todo">operator+=</a>(const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>operator+=</h3>
<code><a href="classstring.html">string</a> & <a href="todo">operator+=</a>(const char * s)</code><p></p>

<h3>insert</h3>
<code>void <a href="todo">insert</a>(int32_t charIndex, const <a href="classstring.html">string</a> & str)</code><p></p>

<h3>insert</h3>
<code>void <a href="todo">insert</a>(int32_t charIndex, const char * str)</code><p></p>

<h3>insert</h3>
<code>void <a href="todo">insert</a>(int32_t charIndex, const char * str, int32_t cb)</code><p></p>

<h3>erase</h3>
<code>void <a href="todo">erase</a>(int32_t charIndex)</code><p></p>

<h3>erase</h3>
<code>void <a href="todo">erase</a>(int32_t charIndexStart, int32_t charIndexEnd)</code><p></p>

<h3>trim</h3>
<code>void <a href="todo">trim</a>()</code><p></p>

<h3>hasPrefix</h3>
<code>bool <a href="todo">hasPrefix</a>(const <a href="classstring.html">string</a> & prefix)</code><p></p>

<h3>hadPrefix</h3>
<code>bool <a href="todo">hadPrefix</a>(const <a href="classstring.html">string</a> & prefix)</code><p></p>

<h3>hasSuffix</h3>
<code>bool <a href="todo">hasSuffix</a>(const <a href="classstring.html">string</a> & suffix)</code><p></p>

<h3>hadSuffix</h3>
<code>bool <a href="todo">hadSuffix</a>(const <a href="classstring.html">string</a> & suffix)</code><p></p>

<h3>string</h3>
<code> <a href="todo">string</a>(const iterator & start, const iterator & end)</code><p></p>

<h3>begin</h3>
<code>iterator <a href="todo">begin</a>()</code><p></p>

<h3>end</h3>
<code>iterator <a href="todo">end</a>()</code><p></p>

<h3>extractUpTo</h3>
<code><a href="classstring.html">string</a> <a href="todo">extractUpTo</a>(const <a href="classstring.html">string</a> & sep, bool remove)</code><p></p>

<h3>tokenise</h3>
<code><a href="classstring.html">string</a> <a href="todo">tokenise</a>(const <a href="classstring.html">string</a> & sep)</code><p></p>

<h3>hash</h3>
<code>size_t <a href="todo">hash</a>()</code><p></p>

<h3>lowercase</h3>
<code><a href="classstring.html">string</a> <a href="todo">lowercase</a>()</code><p></p>

<h3>split</h3>
<code>vector< <a href="classstring.html">string</a> > <a href="todo">split</a>(const <a href="classstring.html">string</a> & delimiter)</code><p></p>

<h3>unhex</h3>
<code><a href="classbytearray.html">bytearray</a> <a href="todo">unhex</a>()</code><p></p>

<h3>asInt</h3>
<code>int32_t <a href="todo">asInt</a>()</code><p></p>

<h3>urlEncode</h3>
<code><a href="classstring.html">string</a> <a href="todo">urlEncode</a>()</code><p></p>

<h3>toByteArray</h3>
<code><a href="classbytearray.html">bytearray</a> <a href="todo">toByteArray</a>(bool copy)</code><p></p>

<h3>format</h3>
<code><a href="classstring.html">string</a> <a href="todo">format</a>(const char * fmt, ... )</code><p></p>

<h3>uuid</h3>
<code><a href="classstring.html">string</a> <a href="todo">uuid</a>()</code><p></p>

<h3>hex</h3>
<code><a href="classstring.html">string</a> <a href="todo">hex</a>(const void * p, int32_t cb)</code><p></p>

<h3>charIndexToByteIndex</h3>
<code>int32_t <a href="todo">charIndexToByteIndex</a>(int32_t charIndex)</code><p></p>

<h3>readUtf8</h3>
<code>char32_t <a href="todo">readUtf8</a>(int32_t & byteOffset)</code><p></p>

<h3>normaliseCharRange</h3>
<code>void <a href="todo">normaliseCharRange</a>(int32_t & charIndexStart, int32_t & charIndexEnd)</code><p></p>

<h3>countChars</h3>
<code>void <a href="todo">countChars</a>()</code><p></p>

